<template>
    <div class={computedWrapperClass}>
        <template if:true={_showMore}>
            <span class="slds-listbox-toggle" aria-hidden="true"><button class="slds-button" tabindex="-1" onclick={handleMoreClick}>{computedPillCountMoreLabel}</button></span>
        </template>
        <template for:each={pillViewModels} for:item="pillViewModel" for:index="index">
            <!--
             W-8012126: Temporarily adding slds-truncate so pills truncate on small form factors.
            -->
            <lightning-pill label={pillViewModel.pill.item.label}
                            onclick={handlePillClick}
                            name={index}
                            href={pillViewModel.pill.item.href}
                            onremove={handleRemove}
                            onblur={handlePillBlur}
                            onfocus={handlePillFocus}
                            variant={pillViewModel.pill.variant}
                            key={pillViewModel.pill.item.label}
                            class="slds-truncate">
                <template if:true={pillViewModel.pill.isIcon}>
                    <lightning-icon
                        class="slds-icon_container"
                        icon-name={pillViewModel.pill.item.iconName}
                        alternative-text={pillViewModel.pill.item.alternativeText}>
                    </lightning-icon>
                </template>
                <template if:true={pillViewModel.pill.isAvatar}>
                    <lightning-avatar src={pillViewModel.pill.item.src}
                                      fallback-icon-name={pillViewModel.pill.item.fallbackIconName}
                                      variant={pillViewModel.pill.item.variant}
                                      size="x-small"
                                      class="slds-icon_container"
                                      alternative-text={pillViewModel.pill.item.alternativeText}>
                    </lightning-avatar>
                </template>
            </lightning-pill>
        </template>
    </div>
</template>
